<div class="layout__comments__index">
  <% tale.comments.each.with_index(1) do |comment, index| %>
    <div id="script__comment__<%= index %>" class="layout__comments__index__item module__panel">
      <div class="module__panel__inner">

        <div v-cloak>
          <%= form_for(comment, url: update_comment_path) do |f| %>
              <%= hidden_field_tag :comment_view_number, comment.view_number %>
              <%= render 'comments/form', f: f, index: index, tale: tale %>
          <% end %>
        </div>

        <div class="module__markdown">
          <%= markdown_to_html(comment.content) %>
        </div>

        <hr class="layout__comments__index__item__divide"/>

        <a v-on:click="showModal" class="layout__comments__index__item__edit"><%= t('.edit') %></a>

        <%= link_to t('.delete.title'),
                    comments_path(comment_view_number: comment.view_number, view_number: tale.view_number),
                    method: :delete,
                    data: { confirm: t('.delete.confirm') },
                    title: t('.delete.title'),
                    class: 'layout__comments__index__item__delete'
        %>

        <div class="layout__comments__index__item__information">
          <%= t('views.time.create', time: local_time(comment.created_at)) %>
          <% unless comment.created_at == comment.updated_at %>
              | <%= t('views.time.update', time: local_time(comment.updated_at)) %>
          <% end %>
        </div>

      </div>
    </div>
  <% end %>
</div>
