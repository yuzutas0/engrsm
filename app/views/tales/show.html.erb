<div class="layout__tale__show">

  <div class="layout__tale__show__header">
    <p class="layout__tale__show__header__left"><%= render 'layouts/breadcrumb_2', third_page: Constants::SHOW_TALE_PATH_NAME %></p>
    <%= link_to Constants::EDIT_TALE_PATH_NAME, edit_tale_path(@tale), class: 'layout__tales__index__header__right module__button module__button--small' %>
    <div class="layout__tale__show__header__end"></div>
  </div>

  <hr>
  <h2><%= @tale.title %></h2>

  <ul class="module__tab">
    <li class=<%= @tab_class[0][0] %>>
      <a href="#tab__first" data-toggle="tab">Content</a>
    </li>
    <li class=<%= @tab_class[1][0] %>>
      <a href="#tab__second" data-toggle="tab">Information</a>
    </li>
    <li class=<%= @tab_class[2][0] %>>
      <a href="#tab__third" data-toggle="tab">
        Sequels
        <span class="module__badge module__badge--desktop"><%= @tale.sequels.length %></span>
      </a>
    </li>
  </ul>

  <div class="tab-content"> <!-- tab -->

    <div id="tab__first" class="layout__tale__show__content tab-pane fade <%= @tab_class[0][1] %>"> <!-- tab -->
      <div class="module__panel">
        <div class="module__panel__inner"><%= markdown_to_html(@tale.content) %></div>
      </div>
    </div>

    <div id="tab__second" class="layout__tale__show__information tab-pane fade <%= @tab_class[1][1] %>"> <!-- tab -->

      <div class="layout__tale__show__information__label">
        <p class="layout__tale__show__information__label__heading">Label</p>
        <div class="layout__tale__show__information__label__content">
          <% %w(Label1 Label2 Label3).each do |label| %> <!-- FIXME : sample data -->
              <a href="#" class="module__label"><%= label %></a>
          <% end %>
        </div>
      </div>

      <div class="layout__tale__show__information__star">
        <p class="layout__tale__show__information__star__heading">Score</p>
        <div class="layout__tale__show__information__star__content">
          <% {'Star1':3, 'Star2':1, 'Star3':5}.each do |axis, score| %> <!-- FIXME : sample data -->
              <a href="#" class="module__label"><%= axis %>:<% (1..score).each do %><%= fa_icon 'star' %><% end %></a>
          <% end %>
        </div>
      </div>

      <div class="layout__tale__show__information__time">
        <p class="layout__tale__show__information__time__heading">History</p>
        <div class="layout__tale__show__information__time__content">
          <ul>
            <li>posted at <%= @tale.created_at.strftime('%Y-%b-%d %H:%M') %></li>
            <% unless @tale.created_at == @tale.updated_at %>
                <li>updated at <%= @tale.updated_at.strftime('%Y-%b-%d %H:%M') %></li>
            <% end %>
          </ul>
        </div>
      </div>
    </div>

    <div id="tab__third" class="tab-pane fade <%= @tab_class[2][1] %>"> <!-- tab -->
      <%= form_for(@new_sequel, url: create_sequel_path) do |f| %>
          <%= render 'sequels/form', f: f %>
      <% end %>
      <%= render 'sequels/index' %>
    </div>

  </div>
</div>
